# ğŸ“± LINGERIE SIZE SYSTEM V2 - HOW IT WORKS

## ğŸ¯ FEATURE HOáº T Äá»˜NG NHÆ¯ THáº¾ NÃ€O?

---

## ğŸ“ Vá»Š TRÃ HIá»‚N THá»Š TRÃŠN WEBSITE

### 1. **TRANG Sáº¢N PHáº¨M (Product Detail Page)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Product Image]    LUXURY LACE BRA             â”‚
â”‚                     $59.99                       â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸŒ Region: [US â–¼]  Units: [Inches â–¼]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  SIZE: Select your size                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”              â”‚
â”‚  â”‚32C â”‚32D â”‚34B â”‚34C â”‚34D â”‚36B â”‚              â”‚
â”‚  â”‚ âœ“  â”‚ âœ“  â”‚ âœ“  â”‚ âœ—  â”‚ âœ“  â”‚ âœ“  â”‚ â† Stock     â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜              â”‚
â”‚         â†‘ Click vÃ o 34C (háº¿t hÃ ng)             â”‚
â”‚                                                  â”‚
â”‚  âš ï¸ SIZE 34C IS OUT OF STOCK                   â”‚
â”‚  Try these sister sizes with same cup volume:  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”½ 32D - TIGHTER BAND                  â”‚   â”‚
â”‚  â”‚    Band will be snugger                â”‚   â”‚
â”‚  â”‚    5 in stock  [Add to Cart]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”¼ 36B - LOOSER BAND                   â”‚   â”‚
â”‚  â”‚    Band will be more relaxed           â”‚   â”‚
â”‚  â”‚    3 in stock  [Add to Cart]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                  â”‚
â”‚  â„¹ï¸ What is sister sizing? [Learn more]       â”‚
â”‚                                                  â”‚
â”‚  ğŸ“ [View Size Chart] [Fit Finder]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. **SIZE CHART MODAL**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIZE CHART - BRA                          [âœ—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Size Guide] [Size Chart] [Conversions] [Fit]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚
â”‚  ğŸŒ YOUR REGION: US                              â”‚
â”‚  Switch to: [UK] [EU] [FR] [AU] [JP]            â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ US SIZE CHART                          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ US  â”‚ Band â”‚ Cup  â”‚ Under    â”‚ Bust   â”‚     â”‚
â”‚  â”‚     â”‚ (in) â”‚      â”‚ Bust     â”‚        â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ 32C â”‚ 32   â”‚ C    â”‚ 28-30"   â”‚ 35-36" â”‚ â† Youâ”‚
â”‚  â”‚ 32D â”‚ 32   â”‚ D    â”‚ 28-30"   â”‚ 36-37" â”‚     â”‚
â”‚  â”‚ 34B â”‚ 34   â”‚ B    â”‚ 30-32"   â”‚ 36-37" â”‚     â”‚
â”‚  â”‚ 34C â”‚ 34   â”‚ C    â”‚ 30-32"   â”‚ 37-38" â”‚     â”‚
â”‚  â”‚ 34D â”‚ 34   â”‚ D    â”‚ 30-32"   â”‚ 38-39" â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                   â”‚
â”‚  ğŸ”„ INTERNATIONAL CONVERSIONS                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ US  â”‚ UK  â”‚ EU  â”‚ FR  â”‚ AU  â”‚ JP  â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 34C â”‚ 34C â”‚ 75C â”‚ 90C â”‚ 12C â”‚ 75C â”‚         â”‚
â”‚  â”‚ 34DDâ”‚ 34DDâ”‚ 75E â”‚ 90E â”‚12DD â”‚ 75E â”‚ â† DDâ‰ E  â”‚
â”‚  â”‚34DDDâ”‚ 34E â”‚ 75F â”‚ 90F â”‚ 14D â”‚ 75F â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                   â”‚
â”‚  âš ï¸ Note: US DD = EU E (NOT DD!)                â”‚
â”‚     Always use conversion table, not math!      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. **BRAND FIT NOTICE**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENT PROVOCATEUR - Luxury Bra                 â”‚
â”‚                                                  â”‚
â”‚  âš ï¸ BRAND FIT NOTICE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“ THIS BRAND RUNS SMALL                â”‚    â”‚
â”‚  â”‚                                          â”‚    â”‚
â”‚  â”‚ Normally wear 34C?                       â”‚    â”‚
â”‚  â”‚ We recommend: 36D                        â”‚    â”‚
â”‚  â”‚                                          â”‚    â”‚
â”‚  â”‚ â€¢ Band runs 1 size smaller               â”‚    â”‚
â”‚  â”‚ â€¢ Cup runs 1 size smaller                â”‚    â”‚
â”‚  â”‚                                          â”‚    â”‚
â”‚  â”‚ Based on 127 customer reviews            â”‚    â”‚
â”‚  â”‚ 89% found this helpful â­                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                  â”‚
â”‚  SELECT SIZE:                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚34C â”‚34D â”‚36C â”‚36D â”‚38C â”‚                   â”‚
â”‚  â”‚    â”‚    â”‚    â”‚ âœ“  â”‚    â”‚ â† Recommended     â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ LUá»’NG HOáº T Äá»˜NG (USER FLOW)

### SCENARIO 1: KhÃ¡ch hÃ ng tÃ¬m size háº¿t hÃ ng

```
User Journey:
1. VÃ o trang sáº£n pháº©m
2. Chá»n size 34C
3. Tháº¥y thÃ´ng bÃ¡o "Out of stock"
4. Há»‡ thá»‘ng tá»± Ä‘á»™ng hiá»ƒn thá»‹ sister sizes:
   - 32D (band cháº·t hÆ¡n) - 5 cÃ¡i
   - 36B (band lá»ng hÆ¡n) - 3 cÃ¡i
5. Click "Learn more" â†’ Hiá»ƒu sister sizing
6. Chá»n 32D â†’ Add to cart
7. Backend log recommendation

API Calls:
GET /api/products/123/sizes/alternatives?requestedSize=34C&regionCode=US
â†’ Returns: { isAvailable: false, alternatives: [...] }

POST /api/sizes/sister/accept
â†’ Tracks user acceptance
```

### SCENARIO 2: KhÃ¡ch quá»‘c táº¿ chuyá»ƒn Ä‘á»•i size

```
User Journey:
1. User tá»« UK vÃ o website
2. Há»‡ thá»‘ng detect region: UK (qua IP/language)
3. Click "Region: US â–¼" â†’ Chá»n "UK"
4. Táº¥t cáº£ sizes hiá»ƒn thá»‹ theo chuáº©n UK
5. Click "View Size Chart"
6. Tab "Conversions" hiá»ƒn thá»‹ báº£ng quy Ä‘á»•i:
   US 34DD = UK 34DD = EU 75E
7. User hiá»ƒu: UK dÃ¹ng E, khÃ´ng dÃ¹ng DDD

API Calls:
POST /api/sizes/cup/convert
{ fromRegion: "UK", toRegion: "US", cupLetter: "DD" }
â†’ Returns: { toCupLetter: "DD", cupVolume: 6 }

GET /api/sizes/cup/matrix/6
â†’ Returns: { US: "DD", UK: "DD", EU: "E" }
```

---

## ğŸ’» BACKEND â†’ FRONTEND DATA FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATABASE   â”‚
â”‚              â”‚
â”‚ â€¢ RegionalSize
â”‚ â€¢ SizeConversion
â”‚ â€¢ Brand
â”‚ â€¢ ProductVariant
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Redis Cache
â”‚   SERVICES   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚              â”‚
â”‚ â€¢ SisterSizingService
â”‚ â€¢ CupProgressionService
â”‚ â€¢ BrandFitService
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API ROUTES  â”‚
â”‚              â”‚
â”‚ GET /api/products/:id/sizes/alternatives
â”‚ POST /api/sizes/cup/convert
â”‚ POST /api/brands/fit/adjust
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ JSON Response
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND   â”‚
â”‚              â”‚
â”‚ â€¢ SizeSelector Component
â”‚ â€¢ SisterSizeAlert Component
â”‚ â€¢ BrandFitNotice Component
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ TRIá»‚N KHAI HOÃ€N Táº¤T âœ…

### âœ… ÄÃ£ cÃ³ (Backend):
- Database schema hoÃ n chá»‰nh
- 3 services hoáº¡t Ä‘á»™ng
- 17 API endpoints
- 88 unit/integration tests
- Cache vá»›i Redis
- Migration & seed data

### âœ… ÄÃ£ cÃ³ (Frontend):
- **4 React components** ready to use
- **TypeScript types** Ä‘áº§y Ä‘á»§
- **API client** vá»›i 10 functions
- **Dark mode** support
- **Tailwind CSS** styling
- **Integration guide** chi tiáº¿t

**Components created:**
1. `SisterSizeAlert` - Hiá»ƒn thá»‹ sister sizes khi háº¿t hÃ ng
2. `BrandFitNotice` - ThÃ´ng bÃ¡o brand fit (runs small/large)
3. `RegionSwitcher` - Chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c region (US/UK/EU)
4. `SizeChartConversion` - Báº£ng quy Ä‘á»•i quá»‘c táº¿

**Files:**
- `frontend/src/types/size-system-v2.ts`
- `frontend/src/lib/sizeSystemApi.ts`
- `frontend/src/components/product/SisterSizeAlert.tsx`
- `frontend/src/components/product/BrandFitNotice.tsx`
- `frontend/src/components/product/RegionSwitcher.tsx`
- `frontend/src/components/product/SizeChartConversion.tsx`
- `docs/FRONTEND_INTEGRATION.md` - HÆ°á»›ng dáº«n tÃ­ch há»£p

---

## ğŸš€ CÃCH Sá»¬ Dá»¤NG

### Backend API Testing

```bash
# 1. Get sister sizes
curl http://localhost:5000/api/sizes/sister/UIC_BRA_BAND86_CUPVOL6

# 2. Get alternatives
curl "http://localhost:5000/api/products/1/sizes/alternatives?requestedSize=34C&regionCode=US"

# 3. Convert cup
curl -X POST http://localhost:5000/api/sizes/cup/convert \
  -H "Content-Type: application/json" \
  -d '{"fromRegion":"US","toRegion":"EU","cupLetter":"DD"}'

# 4. Brand fit
curl -X POST http://localhost:5000/api/brands/fit/adjust \
  -H "Content-Type: application/json" \
  -d '{"brandId":"brand_ap","userNormalSize":"34C","regionCode":"US"}'
```

### Frontend Integration

Xem hÆ°á»›ng dáº«n chi tiáº¿t táº¡i: **`docs/FRONTEND_INTEGRATION.md`**

**Quick Start:**

```tsx
import SisterSizeAlert from '@/components/product/SisterSizeAlert';
import BrandFitNotice from '@/components/product/BrandFitNotice';
import RegionSwitcher from '@/components/product/RegionSwitcher';

// Product Page
<RegionSwitcher currentRegion="US" onRegionChange={setRegion} />
<BrandFitNotice brandId="brand_ap" userNormalSize="34C" regionCode="US" />
<SisterSizeAlert productId={1} requestedSize="34C" regionCode="US" onSizeSelect={handleSelect} />
```

**Xem thÃªm:** `docs/FRONTEND_INTEGRATION.md` Ä‘á»ƒ biáº¿t cÃ¡ch tÃ­ch há»£p Ä‘áº§y Ä‘á»§.
