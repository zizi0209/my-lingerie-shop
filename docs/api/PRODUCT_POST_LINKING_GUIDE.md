# HÆ°á»›ng dáº«n sá»­ dá»¥ng tÃ­nh nÄƒng liÃªn káº¿t Sáº£n pháº©m - BÃ i viáº¿t

## ğŸ“ Tá»•ng quan

TÃ­nh nÄƒng nÃ y cho phÃ©p liÃªn káº¿t sáº£n pháº©m vá»›i bÃ i viáº¿t blog Ä‘á»ƒ:
- TÄƒng tÆ°Æ¡ng tÃ¡c vÃ  conversion rate
- Giá»›i thiá»‡u sáº£n pháº©m ngay trong ná»™i dung bÃ i viáº¿t
- Táº¡o tráº£i nghiá»‡m mua sáº¯m liá»n máº¡ch

## ğŸ¯ Kiá»ƒu hiá»ƒn thá»‹ (Display Types)

### 1. **Inline Card** (Trong ná»™i dung)
- Hiá»ƒn thá»‹ card sáº£n pháº©m xen káº½ trong paragraphs cá»§a bÃ i viáº¿t
- Tá»± Ä‘á»™ng inject sau má»—i 3 Ä‘oáº¡n vÄƒn
- PhÃ¹ há»£p: Sáº£n pháº©m Ä‘Æ°á»£c Ä‘á» cáº­p trá»±c tiáº¿p trong ná»™i dung

### 2. **Sidebar** (Thanh bÃªn)
- Hiá»ƒn thá»‹ sticky sidebar bÃªn pháº£i content
- LuÃ´n hiá»ƒn thá»‹ khi user scroll
- PhÃ¹ há»£p: Sáº£n pháº©m liÃªn quan nhÆ°ng khÃ´ng Ä‘á» cáº­p trá»±c tiáº¿p

### 3. **End Collection** (Collection cuá»‘i bÃ i)
- Hiá»ƒn thá»‹ dáº¡ng grid á»Ÿ cuá»‘i bÃ i viáº¿t
- CÃ³ heading "Sáº£n pháº©m Ä‘Æ°á»£c Ä‘á» xuáº¥t"
- PhÃ¹ há»£p: NhÃ³m sáº£n pháº©m liÃªn quan, upsell

## ğŸš€ CÃ¡ch sá»­ dá»¥ng

### BÆ°á»›c 1: Truy cáº­p Dashboard
1. ÄÄƒng nháº­p vÃ o admin dashboard
2. VÃ o menu **Marketing** â†’ **LiÃªn káº¿t SP-BV**

### BÆ°á»›c 2: Chá»n bÃ i viáº¿t
- Danh sÃ¡ch bÃ i viáº¿t hiá»ƒn thá»‹ á»Ÿ sidebar trÃ¡i
- Click vÃ o bÃ i viáº¿t muá»‘n quáº£n lÃ½
- BÃ i viáº¿t Ä‘ang chá»n sáº½ highlight mÃ u xanh

### BÆ°á»›c 3: ThÃªm sáº£n pháº©m
1. Click nÃºt **"ThÃªm sáº£n pháº©m"**
2. TÃ¬m kiáº¿m sáº£n pháº©m theo tÃªn
3. Click vÃ o sáº£n pháº©m trong káº¿t quáº£ tÃ¬m kiáº¿m
4. Chá»n **Display Type** (inline-card, sidebar, end-collection)
5. (TÃ¹y chá»n) ThÃªm **Custom Note** Ä‘á»ƒ hiá»ƒn thá»‹ ghi chÃº Ä‘áº·c biá»‡t
6. Click **LÆ°u**

### BÆ°á»›c 4: XÃ³a liÃªn káº¿t
- Click icon **Trash** (ğŸ—‘ï¸) bÃªn cáº¡nh sáº£n pháº©m muá»‘n xÃ³a
- XÃ¡c nháº­n xÃ³a trong popup

## ğŸ’¡ Best Practices

### Khi nÃ o dÃ¹ng Inline Card?
âœ… Sáº£n pháº©m Ä‘Æ°á»£c review chi tiáº¿t trong bÃ i
âœ… Äá» cáº­p Ä‘áº¿n tÃ­nh nÄƒng/Æ°u Ä‘iá»ƒm cá»¥ thá»ƒ
âœ… Muá»‘n tÄƒng conversion trong ná»™i dung

### Khi nÃ o dÃ¹ng Sidebar?
âœ… Sáº£n pháº©m ná»•i báº­t muá»‘n luÃ´n hiá»ƒn thá»‹
âœ… Sáº£n pháº©m liÃªn quan chung chung
âœ… KhÃ´ng muá»‘n lÃ m giÃ¡n Ä‘oáº¡n ná»™i dung

### Khi nÃ o dÃ¹ng End Collection?
âœ… Nhiá»u sáº£n pháº©m cÃ¹ng loáº¡i (3-6 sáº£n pháº©m)
âœ… Äá» xuáº¥t mua sáº¯m sau khi Ä‘á»c xong
âœ… Cross-sell / Upsell

## ğŸ“Š VÃ­ dá»¥ thá»±c táº¿

### BÃ i viáº¿t: "Xu hÆ°á»›ng ná»™i y xuÃ¢n hÃ¨ 2025"

**Inline Card:**
- Sáº£n pháº©m: "Set ná»™i y ren cao cáº¥p"
- Note: "ÄÆ°á»£c Ä‘á» cáº­p á»Ÿ pháº§n xu hÆ°á»›ng ren phÃ¡p"

**Sidebar:**
- Sáº£n pháº©m: "MÃ³c káº¹p Ä‘iá»u chá»‰nh"
- Note: "Phá»¥ kiá»‡n khÃ´ng thá»ƒ thiáº¿u cho mÃ¹a hÃ¨"

**End Collection:**
- Sáº£n pháº©m 1: "Miáº¿ng lÃ³t ngá»±c"
- Sáº£n pháº©m 2: "Miáº¿ng che Ä‘áº§u ngá»±c"
- Sáº£n pháº©m 3: "Ão lÃ³t khÃ´ng gá»ng"
- Note: "Bá»™ sÆ°u táº­p hot trend 2025"

## ğŸ”§ Technical Details

### API Endpoints

**Get products cá»§a má»™t post:**
```
GET /api/product-posts/posts/:postId/products
```

**Get posts cá»§a má»™t product:**
```
GET /api/product-posts/products/:productId/posts
```

**Link product vá»›i post:**
```
POST /api/product-posts/link
Body: {
  postId: number,
  productId: number,
  displayType: 'inline-card' | 'sidebar' | 'end-collection',
  customNote?: string,
  position?: number
}
```

**Unlink:**
```
DELETE /api/product-posts/unlink/:postId/:productId
```

### Database Schema

```prisma
model ProductOnPost {
  postId      Int
  productId   Int
  displayType String  // 'inline-card' | 'sidebar' | 'end-collection'
  position    Int?    // Thá»© tá»± hiá»ƒn thá»‹
  customNote  String? // Ghi chÃº tÃ¹y chá»‰nh
  createdAt   DateTime
  
  post    Post    @relation(...)
  product Product @relation(...)
  
  @@id([postId, productId])
}
```

## ğŸ“± Frontend Components

### Trang bÃ i viáº¿t (Blog Post Page)
- Component: `PostContent` (`frontend/src/components/blog/PostContent.tsx`)
- Tá»± Ä‘á»™ng fetch vÃ  hiá»ƒn thá»‹ products theo displayType
- Render ProductCardInPost component

### Trang sáº£n pháº©m (Product Detail Page)
- Component: `RelatedPosts` (`frontend/src/components/product/RelatedPosts.tsx`)
- Hiá»ƒn thá»‹ bÃ i viáº¿t liÃªn quan á»Ÿ cuá»‘i trang sáº£n pháº©m
- Click tracking cho analytics

### Dashboard Admin
- Page: `frontend/src/app/dashboard/product-posts/page.tsx`
- Component: `frontend/src/components/dashboard/pages/ProductPosts.tsx`

## ğŸ¨ Custom Note Examples

âœ… **Good:**
- "Sáº£n pháº©m Ä‘Æ°á»£c Ä‘á» cáº­p trong pháº§n XYZ"
- "Hot trend mÃ¹a hÃ¨ 2025"
- "Giáº£m 30% trong tuáº§n nÃ y"

âŒ **Avoid:**
- Too long (> 100 chars)
- Generic ("Xem thÃªm")
- Duplicate product name

## ğŸ“ˆ SEO & Performance

- Products load asynchronously, khÃ´ng block rendering
- Image lazy loading
- Tracking clicks for analytics
- Rich snippets compatible

## ğŸ› Troubleshooting

### Sáº£n pháº©m khÃ´ng hiá»ƒn thá»‹?
1. âœ… Check post Ä‘Ã£ published chÆ°a?
2. âœ… Check product Ä‘Ã£ link Ä‘Ãºng postId?
3. âœ… Check API response trong Network tab
4. âœ… Clear cache vÃ  reload

### Seed sample data
```bash
cd backend
bunx ts-node scripts/seed-product-posts.ts
```

## ğŸ“ Support

CÃ³ váº¥n Ä‘á»? Check:
1. Backend logs: `backend/src/controllers/productPostController.ts`
2. Frontend component: `frontend/src/components/blog/PostContent.tsx`
3. API routes: `backend/src/routes/productPostRoutes.ts`
